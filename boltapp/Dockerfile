FROM node:16.13.0-slim

WORKDIR /app
ENV PATH /app/node_modules/.bin:$PATH
COPY package.json .
RUN npm install

ARG SLACK_BOT_TOKEN
ARG SLACK_SIGNING_SECRET
ARG SLACK_APP_TOKEN
ENV SLACK_BOT_TOKEN $SLACK_BOT_TOKEN
ENV SLACK_SIGNING_SECRET $SLACK_SIGNING_SECRET
ENV SLACK_APP_TOKEN $SLACK_APP_TOKEN

COPY .env .
COPY index.js .

CMD [ "node", "index.js" ]